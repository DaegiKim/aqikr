@(stations: List[Station], airRawDataList: List[AirRawData])
@main("Welcome to Play") {
    <div id="map" style="width: 100%; height: 100%;"></div>
    <script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=1e218ac71dc2e4ddede21fd356f08ec2"></script>
    <script>
            var mapContainer = document.getElementById('map'),
                    mapOption = {
                        center: new daum.maps.LatLng(37.5665, 126.9780),
                        level: 9
                    };

            var map = new daum.maps.Map(mapContainer, mapOption);

            var mapTypeControl = new daum.maps.MapTypeControl();

            map.addControl(mapTypeControl, daum.maps.ControlPosition.TOPRIGHT);

            var zoomControl = new daum.maps.ZoomControl();
            map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);


            @for(station <- stations) {
                @defining(station.parsePolygon()) { polygon =>
                    @if(polygon != null) {
                        var polygonPath = [
                            @for(xy <- polygon) {
                                new daum.maps.LatLng(@xy.getLeft, @xy.getRight),
                            }
                        ];

                        var polygon = new daum.maps.Polygon({
                            path:polygonPath, // 그려질 다각형의 좌표 배열입니다
                            strokeWeight: 1, // 선의 두께입니다
                            strokeColor: '#FF0000', // 선의 색깔입니다
                            strokeOpacity: 0.8, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
                            strokeStyle: 'solid', // 선의 스타일입니다
                            fillColor: '@AirRawData.getColor(AirRawData.AQIPM25(AirRawData.getByStation(station, airRawDataList).pm25Value))', // 채우기 색깔입니다
                            fillOpacity: 0.5 // 채우기 불투명도 입니다
                        });

                        polygon.setMap(map);

                        @defining(station.getCentralGeoCoordinate) { center =>
                            var name = '@AirRawData.AQIPM25(AirRawData.getByStation(station, airRawDataList).pm25Value)';
                            var customOverlay = new daum.maps.CustomOverlay({
                                position: new daum.maps.LatLng(@center.getLeft, @center.getRight),
                                content: '<div class ="label"><span class="left"></span><span class="center">'+name+'</span><span class="right"></span></div>'
                            });

                            customOverlay.setMap(map);
                        }
                    }
                }
            }
    </script>

}
